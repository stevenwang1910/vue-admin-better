<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è“ç™½ä¸»é¢˜åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 600;
        }
        .test-section {
            margin: 25px 0;
            padding: 20px;
            border: 2px solid #e8e8e8;
            border-radius: 10px;
            background: #fafafa;
        }
        .test-section h3 {
            color: #34495e;
            margin-top: 0;
            font-size: 18px;
        }
        .btn {
            padding: 12px 24px;
            margin: 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .btn-primary {
            background: linear-gradient(45deg, #1890ff, #40a9ff);
            color: white;
        }
        .btn-success {
            background: linear-gradient(45deg, #52c41a, #73d13d);
            color: white;
        }
        .btn-warning {
            background: linear-gradient(45deg, #faad14, #ffc53d);
            color: white;
        }
        .btn-danger {
            background: linear-gradient(45deg, #ff4d4f, #ff7875);
            color: white;
        }
        .btn-info {
            background: linear-gradient(45deg, #722ed1, #9254de);
            color: white;
        }
        .status {
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 6px;
            font-weight: 500;
            border-left: 4px solid;
        }
        .status-success {
            background: #f6ffed;
            border-color: #52c41a;
            color: #52c41a;
        }
        .status-error {
            background: #fff2f0;
            border-color: #ff4d4f;
            color: #ff4d4f;
        }
        .status-warning {
            background: #fffbe6;
            border-color: #faad14;
            color: #faad14;
        }
        .status-info {
            background: #f9f0ff;
            border-color: #722ed1;
            color: #722ed1;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 1px solid #e8e8e8;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
        }
        .feature-list li:before {
            content: "âœ“";
            color: #52c41a;
            font-weight: bold;
            margin-right: 10px;
            font-size: 16px;
        }
        .theme-preview {
            width: 100%;
            height: 200px;
            border: 2px solid #e8e8e8;
            border-radius: 8px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }
        .preview-header {
            height: 40px;
            background: #1890ff;
            display: flex;
            align-items: center;
            padding: 0 15px;
            color: white;
            font-weight: 500;
        }
        .preview-sidebar {
            position: absolute;
            left: 0;
            top: 40px;
            width: 80px;
            bottom: 0;
            background: white;
            border-right: 1px solid #e8e8e8;
            padding: 15px 10px;
            color: #333;
            font-size: 12px;
        }
        .preview-content {
            position: absolute;
            left: 80px;
            top: 40px;
            right: 0;
            bottom: 0;
            background: #f0f2f5;
            padding: 20px;
            color: #333;
        }
        .column-mode .preview-sidebar {
            width: 60px;
            padding: 15px 5px;
            text-align: center;
        }
        .column-mode .preview-content {
            left: 60px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ è“ç™½ä¸»é¢˜åŠŸèƒ½æµ‹è¯•ä¸­å¿ƒ</h1>
        
        <div class="grid">
            <div class="card">
                <h3>ğŸ“‹ åŠŸèƒ½æ¸…å•</h3>
                <ul class="feature-list">
                    <li>è“ç™½ä¸»é¢˜æ ·å¼æ–‡ä»¶ (blue-white.scss)</li>
                    <li>ä¸»é¢˜é…ç½®ç»„ä»¶é›†æˆ</li>
                    <li>ä¸»é¢˜å·¥å…·å‡½æ•°</li>
                    <li>åˆ†æ æ¨¡å¼æ”¯æŒ</li>
                    <li>ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½</li>
                    <li>å¼ºåˆ¶åˆ·æ–°èœå•</li>
                    <li>localStorage æŒä¹…åŒ–</li>
                </ul>
            </div>
            
            <div class="card">
                <h3>ğŸ¯ æµ‹è¯•æ­¥éª¤</h3>
                <div class="code-block">
1. ç‚¹å‡»"åˆ‡æ¢åˆ°è“ç™½ä¸»é¢˜"æŒ‰é’®
2. è§‚å¯Ÿé¡µé¢æ ·å¼å˜åŒ–
3. æµ‹è¯•åˆ†æ æ¨¡å¼åˆ‡æ¢
4. éªŒè¯ä¸»é¢˜æŒä¹…åŒ–
5. æ£€æŸ¥èœå•åˆ·æ–°åŠŸèƒ½
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ”„ ä¸»é¢˜åˆ‡æ¢æµ‹è¯•</h3>
            <button class="btn btn-primary" onclick="switchToBlueWhite()">åˆ‡æ¢åˆ°è“ç™½ä¸»é¢˜</button>
            <button class="btn btn-success" onclick="switchToDefault()">åˆ‡æ¢åˆ°é»˜è®¤ä¸»é¢˜</button>
            <button class="btn btn-warning" onclick="switchToGreen()">åˆ‡æ¢åˆ°ç»¿è«è‰åœº</button>
            <button class="btn btn-info" onclick="switchToGlory()">åˆ‡æ¢åˆ°è£è€€å…¸è—</button>
            <div id="theme-status" class="status status-info">å½“å‰ä¸»é¢˜: æ£€æµ‹ä¸­...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ åˆ†æ æ¨¡å¼æµ‹è¯•</h3>
            <button class="btn btn-primary" onclick="enableColumnMode()">å¯ç”¨åˆ†æ æ¨¡å¼</button>
            <button class="btn btn-warning" onclick="disableColumnMode()">ç¦ç”¨åˆ†æ æ¨¡å¼</button>
            <button class="btn btn-success" onclick="toggleColumnMode()">åˆ‡æ¢åˆ†æ æ¨¡å¼</button>
            <div id="column-status" class="status status-info">åˆ†æ æ¨¡å¼: æ£€æµ‹ä¸­...</div>
            
            <div class="theme-preview" id="preview-normal">
                <div class="preview-header">è“ç™½ä¸»é¢˜ - æ ‡å‡†æ¨¡å¼</div>
                <div class="preview-sidebar">
                    <div>ğŸ“Š ä»ªè¡¨æ¿</div>
                    <div>ğŸ“‹ è¡¨æ ¼</div>
                    <div>ğŸ“ è¡¨å•</div>
                </div>
                <div class="preview-content">
                    <div>ä¸»å†…å®¹åŒºåŸŸ - æ ‡å‡†å¸ƒå±€</div>
                    <div style="margin-top: 10px; font-size: 12px; color: #666;">
                        ä¾§è¾¹æ å®½åº¦: 80px
                    </div>
                </div>
            </div>
            
            <div class="theme-preview column-mode" id="preview-column" style="display: none;">
                <div class="preview-header">è“ç™½ä¸»é¢˜ - åˆ†æ æ¨¡å¼</div>
                <div class="preview-sidebar">
                    <div>ğŸ“Š</div>
                    <div>ğŸ“‹</div>
                    <div>ğŸ“</div>
                </div>
                <div class="preview-content">
                    <div>ä¸»å†…å®¹åŒºåŸŸ - åˆ†æ å¸ƒå±€</div>
                    <div style="margin-top: 10px; font-size: 12px; color: #666;">
                        ä¾§è¾¹æ å®½åº¦: 60px (å›¾æ ‡æ¨¡å¼)
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ’¾ æŒä¹…åŒ–æµ‹è¯•</h3>
            <button class="btn btn-primary" onclick="saveThemeConfig()">ä¿å­˜å½“å‰é…ç½®</button>
            <button class="btn btn-success" onclick="loadThemeConfig()">åŠ è½½ä¿å­˜çš„é…ç½®</button>
            <button class="btn btn-warning" onclick="clearThemeConfig()">æ¸…é™¤é…ç½®</button>
            <button class="btn btn-info" onclick="showCurrentConfig()">æ˜¾ç¤ºå½“å‰é…ç½®</button>
            <div id="config-display" class="code-block" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ”„ å¼ºåˆ¶åˆ·æ–°æµ‹è¯•</h3>
            <button class="btn btn-primary" onclick="forceMenuRefresh()">å¼ºåˆ¶åˆ·æ–°èœå•</button>
            <button class="btn btn-success" onclick="simulateMenuUpdate()">æ¨¡æ‹Ÿèœå•æ›´æ–°</button>
            <div id="refresh-status" class="status status-info">èœå•çŠ¶æ€: æ­£å¸¸</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š ç»¼åˆçŠ¶æ€ç›‘æ§</h3>
            <div id="comprehensive-status" class="code-block">
                æ­£åœ¨æ£€æµ‹ç³»ç»ŸçŠ¶æ€...
            </div>
        </div>
    </div>

    <script>
        // ä¸»é¢˜å·¥å…·å‡½æ•°ï¼ˆæ¨¡æ‹Ÿå®ç°ï¼‰
        const themeUtils = {
            getThemeConfig: function() {
                try {
                    const config = localStorage.getItem('vue-admin-better-theme');
                    return config ? JSON.parse(config) : { name: 'default' };
                } catch (error) {
                    return { name: 'default' };
                }
            },
            
            saveThemeConfig: function(config) {
                try {
                    localStorage.setItem('vue-admin-better-theme', JSON.stringify(config));
                    return true;
                } catch (error) {
                    return false;
                }
            },
            
            applyTheme: function(themeName) {
                document.body.className = `vue-admin-better-theme-${themeName}`;
                this.updateStatus();
            },
            
            switchTheme: function(themeName, options = {}) {
                const config = this.getThemeConfig();
                config.name = themeName;
                
                if (themeName === 'blue-white' && options.columnMode !== undefined) {
                    config.columnMode = options.columnMode.toString();
                    this.handleBlueWhiteColumnMode(options.columnMode);
                }
                
                this.applyTheme(themeName);
                this.saveThemeConfig(config);
            },
            
            handleBlueWhiteColumnMode: function(enable) {
                if (enable) {
                    document.body.classList.add('blue-white-column-mode', 'blue-white-column-transition');
                } else {
                    document.body.classList.remove('blue-white-column-mode', 'blue-white-column-transition');
                }
                this.updateColumnStatus();
            },
            
            isBlueWhiteTheme: function() {
                const config = this.getThemeConfig();
                return config.name === 'blue-white';
            },
            
            forceMenuRefresh: function() {
                const event = new CustomEvent('theme-menu-refresh', {
                    detail: { timestamp: Date.now() }
                });
                document.dispatchEvent(event);
                
                document.getElementById('refresh-status').className = 'status status-success';
                document.getElementById('refresh-status').textContent = 'èœå•çŠ¶æ€: å·²åˆ·æ–° (' + new Date().toLocaleTimeString() + ')';
                
                setTimeout(() => {
                    document.getElementById('refresh-status').className = 'status status-info';
                    document.getElementById('refresh-status').textContent = 'èœå•çŠ¶æ€: æ­£å¸¸';
                }, 3000);
            },
            
            updateStatus: function() {
                const config = this.getThemeConfig();
                const bodyClasses = document.body.className;
                
                document.getElementById('theme-status').textContent = `å½“å‰ä¸»é¢˜: ${config.name}`;
                document.getElementById('theme-status').className = 'status status-success';
                
                this.updateColumnStatus();
                this.updateComprehensiveStatus();
            },
            
            updateColumnStatus: function() {
                const bodyClasses = document.body.className;
                const hasColumnMode = bodyClasses.includes('blue-white-column-mode');
                
                document.getElementById('column-status').textContent = `åˆ†æ æ¨¡å¼: ${hasColumnMode ? 'å·²å¯ç”¨' : 'æœªå¯ç”¨'}`;
                document.getElementById('column-status').className = hasColumnMode ? 'status status-success' : 'status status-info';
                
                // æ›´æ–°é¢„è§ˆ
                document.getElementById('preview-normal').style.display = hasColumnMode ? 'none' : 'block';
                document.getElementById('preview-column').style.display = hasColumnMode ? 'block' : 'none';
            },
            
            updateComprehensiveStatus: function() {
                const config = this.getThemeConfig();
                const bodyClasses = document.body.className;
                const hasColumnMode = bodyClasses.includes('blue-white-column-mode');
                
                const status = {
                    theme: config.name,
                    columnMode: hasColumnMode,
                    layout: config.layout || 'vertical',
                    header: config.header || 'fixed',
                    tabsBar: config.tabsBar || 'true',
                    timestamp: new Date().toLocaleString(),
                    bodyClasses: bodyClasses,
                    localStorage: !!localStorage.getItem('vue-admin-better-theme')
                };
                
                document.getElementById('comprehensive-status').textContent = JSON.stringify(status, null, 2);
            }
        };

        // ä¸»é¢˜åˆ‡æ¢å‡½æ•°
        function switchToBlueWhite() {
            themeUtils.switchTheme('blue-white');
            showNotification('å·²åˆ‡æ¢åˆ°è“ç™½ä¸»é¢˜', 'success');
        }

        function switchToDefault() {
            themeUtils.switchTheme('default');
            showNotification('å·²åˆ‡æ¢åˆ°é»˜è®¤ä¸»é¢˜', 'success');
        }

        function switchToGreen() {
            themeUtils.switchTheme('green');
            showNotification('å·²åˆ‡æ¢åˆ°ç»¿è«è‰åœºä¸»é¢˜', 'success');
        }

        function switchToGlory() {
            themeUtils.switchTheme('glory');
            showNotification('å·²åˆ‡æ¢åˆ°è£è€€å…¸è—ä¸»é¢˜', 'success');
        }

        // åˆ†æ æ¨¡å¼å‡½æ•°
        function enableColumnMode() {
            if (themeUtils.isBlueWhiteTheme()) {
                themeUtils.handleBlueWhiteColumnMode(true);
                showNotification('è“ç™½ä¸»é¢˜åˆ†æ æ¨¡å¼å·²å¯ç”¨', 'success');
            } else {
                showNotification('è¯·å…ˆåˆ‡æ¢åˆ°è“ç™½ä¸»é¢˜', 'warning');
            }
        }

        function disableColumnMode() {
            themeUtils.handleBlueWhiteColumnMode(false);
            showNotification('åˆ†æ æ¨¡å¼å·²ç¦ç”¨', 'info');
        }

        function toggleColumnMode() {
            if (themeUtils.isBlueWhiteTheme()) {
                const bodyClasses = document.body.className;
                const hasColumnMode = bodyClasses.includes('blue-white-column-mode');
                themeUtils.handleBlueWhiteColumnMode(!hasColumnMode);
                showNotification(`åˆ†æ æ¨¡å¼å·²${!hasColumnMode ? 'å¯ç”¨' : 'ç¦ç”¨'}`, 'success');
            } else {
                showNotification('è¯·å…ˆåˆ‡æ¢åˆ°è“ç™½ä¸»é¢˜', 'warning');
            }
        }

        // é…ç½®ç®¡ç†å‡½æ•°
        function saveThemeConfig() {
            const config = themeUtils.getThemeConfig();
            const success = themeUtils.saveThemeConfig(config);
            showNotification(success ? 'é…ç½®å·²ä¿å­˜' : 'ä¿å­˜å¤±è´¥', success ? 'success' : 'error');
        }

        function loadThemeConfig() {
            const config = themeUtils.getThemeConfig();
            themeUtils.applyTheme(config.name);
            showNotification('é…ç½®å·²åŠ è½½', 'success');
        }

        function clearThemeConfig() {
            localStorage.removeItem('vue-admin-better-theme');
            themeUtils.applyTheme('default');
            showNotification('é…ç½®å·²æ¸…é™¤', 'info');
        }

        function showCurrentConfig() {
            const config = themeUtils.getThemeConfig();
            const configDisplay = document.getElementById('config-display');
            configDisplay.textContent = JSON.stringify(config, null, 2);
            configDisplay.style.display = configDisplay.style.display === 'none' ? 'block' : 'none';
        }

        // åˆ·æ–°å‡½æ•°
        function forceMenuRefresh() {
            themeUtils.forceMenuRefresh();
        }

        function simulateMenuUpdate() {
            showNotification('æ­£åœ¨æ¨¡æ‹Ÿèœå•æ›´æ–°...', 'info');
            setTimeout(() => {
                themeUtils.forceMenuRefresh();
                showNotification('èœå•æ›´æ–°å®Œæˆ', 'success');
            }, 1000);
        }

        // é€šçŸ¥å‡½æ•°
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `status status-${type}`;
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.zIndex = '1000';
            notification.style.minWidth = '200px';
            notification.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            themeUtils.updateStatus();
            
            // ç›‘å¬ä¸»é¢˜èœå•åˆ·æ–°äº‹ä»¶
            document.addEventListener('theme-menu-refresh', function(event) {
                console.log('æ”¶åˆ°èœå•åˆ·æ–°äº‹ä»¶:', event.detail);
            });
            
            showNotification('è“ç™½ä¸»é¢˜æµ‹è¯•å·¥å…·å·²å°±ç»ª', 'success');
        });

        // å®šæœŸæ›´æ–°çŠ¶æ€
        setInterval(() => {
            themeUtils.updateComprehensiveStatus();
        }, 5000);
    </script>
</body>
</html>