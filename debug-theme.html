<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¸»é¢˜é…ç½®è°ƒè¯•å·¥å…·</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 20px;
        background: #f5f7fa;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
      }
      .section {
        margin-bottom: 30px;
        padding: 20px;
        border: 1px solid #e4e7ed;
        border-radius: 6px;
        background: #fafafa;
      }
      .section h3 {
        margin-top: 0;
        color: #303133;
        border-bottom: 2px solid #409eff;
        padding-bottom: 10px;
      }
      .status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
      }
      .status.success {
        background: #f0f9ff;
        border-left: 4px solid #409eff;
      }
      .status.error {
        background: #fef0f0;
        border-left: 4px solid #f56c6c;
      }
      .status.warning {
        background: #fdf6ec;
        border-left: 4px solid #e6a23c;
      }
      button {
        padding: 8px 16px;
        margin: 5px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
      }
      .btn-primary {
        background: #409eff;
        color: white;
      }
      .btn-success {
        background: #67c23a;
        color: white;
      }
      .btn-warning {
        background: #e6a23c;
        color: white;
      }
      .btn-danger {
        background: #f56c6c;
        color: white;
      }
      .menu-demo {
        background: #191a23;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        min-height: 300px;
      }
      .menu-item {
        padding: 12px 20px;
        margin: 4px 0;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .menu-item:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateX(4px);
      }
      .submenu {
        margin-left: 20px;
        margin-top: 8px;
      }
      .submenu-item {
        padding: 8px 16px;
        margin: 2px 0;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
        color: #ccc;
        font-size: 14px;
      }
      /* åˆ†æ æ¨¡å¼æ ·å¼ */
      .blue-white-column-mode .menu-demo {
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        display: flex;
        flex-wrap: wrap;
        padding: 15px;
      }
      .blue-white-column-mode .menu-item {
        background: white;
        color: #165dff;
        margin: 8px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        border: 1px solid #e2e8f0;
        flex: 1;
        min-width: 200px;
      }
      .blue-white-column-mode .submenu {
        width: 100%;
        margin-left: 0;
        margin-top: 10px;
      }
      .blue-white-column-mode .submenu-item {
        background: rgba(22, 93, 255, 0.05);
        color: #4a5568;
      }
      /* åˆ†æ æ•°é‡æ ·å¼ */
      .column-single .menu-item {
        min-width: 90%;
      }
      .column-double .menu-item {
        min-width: 45%;
      }
      .column-triple .menu-item {
        min-width: 30%;
      }
      .column-quad .menu-item {
        min-width: 22%;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¨ Vue Admin Better ä¸»é¢˜é…ç½®è°ƒè¯•å·¥å…·</h1>

      <div class="section">
        <h3>ğŸ“Š å½“å‰çŠ¶æ€æ£€æµ‹</h3>
        <div id="currentStatus" class="status warning">æ­£åœ¨æ£€æµ‹...</div>
        <button class="btn-primary" onclick="checkCurrentStatus()">åˆ·æ–°çŠ¶æ€</button>
        <button class="btn-warning" onclick="clearTheme()">æ¸…é™¤ä¸»é¢˜é…ç½®</button>
      </div>

      <div class="section">
        <h3>ğŸ¯ ä¸»é¢˜é…ç½®æµ‹è¯•</h3>
        <button class="btn-success" onclick="testDefaultTheme()">æµ‹è¯•é»˜è®¤ä¸»é¢˜</button>
        <button class="btn-success" onclick="testBlueWhiteTheme()">æµ‹è¯•è“ç™½ä¸»é¢˜</button>
        <button class="btn-success" onclick="testBlueWhiteWithColumns()">æµ‹è¯•è“ç™½ä¸»é¢˜+åˆ†æ </button>
        <button class="btn-primary" onclick="testColumnVariations()">æµ‹è¯•åˆ†æ æ•°é‡</button>
      </div>

      <div class="section">
        <h3>ğŸ§ª èœå•ç»“æ„æ¼”ç¤º</h3>
        <div id="menuDemo" class="menu-demo">
          <div class="menu-item" onclick="toggleSubmenu(this)">
            ğŸ“ ç³»ç»Ÿç®¡ç†
            <div class="submenu" style="display: none">
              <div class="submenu-item">ç”¨æˆ·ç®¡ç†</div>
              <div class="submenu-item">è§’è‰²ç®¡ç†</div>
              <div class="submenu-item">èœå•ç®¡ç†</div>
            </div>
          </div>
          <div class="menu-item" onclick="toggleSubmenu(this)">
            ğŸ“Š æ•°æ®æŠ¥è¡¨
            <div class="submenu" style="display: none">
              <div class="submenu-item">é”€å”®æŠ¥è¡¨</div>
              <div class="submenu-item">ç”¨æˆ·ç»Ÿè®¡</div>
            </div>
          </div>
          <div class="menu-item" onclick="toggleSubmenu(this)">
            âš™ï¸ ç³»ç»Ÿè®¾ç½®
            <div class="submenu" style="display: none">
              <div class="submenu-item">åŸºç¡€è®¾ç½®</div>
              <div class="submenu-item">å®‰å…¨è®¾ç½®</div>
            </div>
          </div>
        </div>
        <div id="menuStatus" class="status">èœå•æ¼”ç¤ºåŒºåŸŸ</div>
      </div>

      <div class="section">
        <h3>ğŸ” è¯¦ç»†æ—¥å¿—</h3>
        <div id="debugLog" class="status" style="max-height: 300px; overflow-y: auto; background: #f8f8f8"></div>
        <button class="btn-danger" onclick="clearLog()">æ¸…é™¤æ—¥å¿—</button>
      </div>
    </div>

    <script>
      function log(message, type = 'info') {
        const logDiv = document.getElementById('debugLog')
        const timestamp = new Date().toLocaleTimeString()
        const color = type === 'error' ? '#f56c6c' : type === 'success' ? '#67c23a' : '#409eff'
        logDiv.innerHTML += `<div style="color: ${color}; margin: 2px 0;">[${timestamp}] ${message}</div>`
        logDiv.scrollTop = logDiv.scrollHeight
      }

      function checkCurrentStatus() {
        log('å¼€å§‹æ£€æµ‹å½“å‰çŠ¶æ€...')

        // æ£€æŸ¥localStorage
        const themeData = localStorage.getItem('vue-admin-better-theme')
        const statusDiv = document.getElementById('currentStatus')

        if (!themeData) {
          statusDiv.className = 'status error'
          statusDiv.innerHTML = 'âŒ æœªæ‰¾åˆ°ä¸»é¢˜é…ç½®æ•°æ®'
          log('æœªæ‰¾åˆ°ä¸»é¢˜é…ç½®æ•°æ®', 'error')
          return
        }

        try {
          const theme = JSON.parse(themeData)
          statusDiv.className = 'status success'
          statusDiv.innerHTML = `
                    âœ… ä¸»é¢˜é…ç½®å­˜åœ¨<br>
                    ä¸»é¢˜åç§°: ${theme.name || 'default'}<br>
                    åˆ†æ æ¨¡å¼: ${theme.columnMode || 'false'}<br>
                    åˆ†æ æ•°é‡: ${theme.columnCount || '2'}<br>
                    å¸ƒå±€: ${theme.layout || 'vertical'}<br>
                    å¤´éƒ¨: ${theme.header || 'fixed'}
                `
          log(`ä¸»é¢˜é…ç½®è§£ææˆåŠŸ: ${JSON.stringify(theme)}`, 'success')

          // æ£€æŸ¥bodyç±»å
          const bodyClasses = document.body.className
          log(`Bodyç±»å: ${bodyClasses}`, bodyClasses.includes('blue-white') ? 'success' : 'warning')
        } catch (error) {
          statusDiv.className = 'status error'
          statusDiv.innerHTML = `âŒ ä¸»é¢˜é…ç½®è§£æå¤±è´¥: ${error.message}`
          log(`ä¸»é¢˜é…ç½®è§£æå¤±è´¥: ${error.message}`, 'error')
        }
      }

      function applyThemeConfig(config) {
        log(`åº”ç”¨ä¸»é¢˜é…ç½®: ${JSON.stringify(config)}`)

        // ä¿å­˜åˆ°localStorage
        localStorage.setItem('vue-admin-better-theme', JSON.stringify(config))
        log('ä¸»é¢˜é…ç½®å·²ä¿å­˜åˆ°localStorage', 'success')

        // åº”ç”¨ä¸»é¢˜ç±»å
        const body = document.body
        body.className = `vue-admin-better-theme-${config.name}`

        // åº”ç”¨åˆ†æ æ¨¡å¼
        if (config.name === 'blue-white' && config.columnMode === 'true') {
          body.classList.add('blue-white-column-mode', 'blue-white-column-transition')

          // æ·»åŠ åˆ—æ•°ç±»å
          const columnClassMap = {
            1: 'column-single',
            2: 'column-double',
            3: 'column-triple',
            4: 'column-quad',
          }
          const columnClass = columnClassMap[config.columnCount] || 'column-double'
          body.classList.add(columnClass)

          log(`å·²å¯ç”¨åˆ†æ æ¨¡å¼ï¼Œåˆ—æ•°: ${columnClass}`, 'success')
        } else {
          body.classList.remove('blue-white-column-mode', 'blue-white-column-transition')
          body.classList.remove('column-single', 'column-double', 'column-triple', 'column-quad')
          log('åˆ†æ æ¨¡å¼å·²ç¦ç”¨', 'info')
        }

        log(`Bodyç±»åæ›´æ–°ä¸º: ${body.className}`, 'success')
        updateMenuDemo()
      }

      function testDefaultTheme() {
        log('æµ‹è¯•é»˜è®¤ä¸»é¢˜...')
        applyThemeConfig({
          name: 'default',
          layout: 'vertical',
          header: 'fixed',
          tabsBar: 'false',
          columnMode: 'false',
          columnCount: '2',
        })
      }

      function testBlueWhiteTheme() {
        log('æµ‹è¯•è“ç™½ä¸»é¢˜ï¼ˆæ— åˆ†æ ï¼‰...')
        applyThemeConfig({
          name: 'blue-white',
          layout: 'vertical',
          header: 'fixed',
          tabsBar: 'false',
          columnMode: 'false',
          columnCount: '2',
        })
      }

      function testBlueWhiteWithColumns() {
        log('æµ‹è¯•è“ç™½ä¸»é¢˜+åˆ†æ æ¨¡å¼...')
        applyThemeConfig({
          name: 'blue-white',
          layout: 'vertical',
          header: 'fixed',
          tabsBar: 'false',
          columnMode: 'true',
          columnCount: '2',
        })
      }

      function testColumnVariations() {
        log('æµ‹è¯•ä¸åŒåˆ†æ æ•°é‡...')
        const configs = [
          { count: '1', name: 'å•åˆ—' },
          { count: '2', name: 'åŒåˆ—' },
          { count: '3', name: 'ä¸‰åˆ—' },
          { count: '4', name: 'å››åˆ—' },
        ]

        let index = 0
        function showNext() {
          if (index < configs.length) {
            const config = configs[index]
            log(`æµ‹è¯• ${config.name} (${config.count}åˆ—)`)
            applyThemeConfig({
              name: 'blue-white',
              layout: 'vertical',
              header: 'fixed',
              tabsBar: 'false',
              columnMode: 'true',
              columnCount: config.count,
            })
            index++
            setTimeout(showNext, 2000)
          }
        }
        showNext()
      }

      function updateMenuDemo() {
        const menuDemo = document.getElementById('menuDemo')
        const menuStatus = document.getElementById('menuStatus')
        const bodyClasses = document.body.className

        if (bodyClasses.includes('blue-white-column-mode')) {
          menuStatus.innerHTML = 'âœ… åˆ†æ æ¨¡å¼å·²å¯ç”¨'
          menuStatus.className = 'status success'
        } else {
          menuStatus.innerHTML = 'âšª åˆ†æ æ¨¡å¼æœªå¯ç”¨'
          menuStatus.className = 'status warning'
        }
      }

      function toggleSubmenu(element) {
        const submenu = element.querySelector('.submenu')
        if (submenu) {
          submenu.style.display = submenu.style.display === 'none' ? 'block' : 'none'
        }
      }

      function clearTheme() {
        log('æ¸…é™¤ä¸»é¢˜é…ç½®...')
        localStorage.removeItem('vue-admin-better-theme')
        document.body.className = ''
        log('ä¸»é¢˜é…ç½®å·²æ¸…é™¤', 'warning')
        checkCurrentStatus()
        updateMenuDemo()
      }

      function clearLog() {
        document.getElementById('debugLog').innerHTML = ''
      }

      // åˆå§‹åŒ–
      window.onload = function () {
        log('ä¸»é¢˜è°ƒè¯•å·¥å…·å·²åŠ è½½', 'success')
        checkCurrentStatus()
        updateMenuDemo()
      }
    </script>
  </body>
</html>
